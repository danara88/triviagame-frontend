"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[285],{7285:(F,p,i)=>{i.r(p),i.d(p,{RegisterModule:()=>y});var d=i(8583),n=i(665),a=i(1686),c=i(3077),e=i(639),g=i(3071),f=i(3686),Z=i(49);function _(o,t){1&o&&e._UZ(0,"i",20)}function h(o,t){1&o&&(e.TgZ(0,"span",21),e._uU(1,"Invalid full name"),e.qZA())}function v(o,t){1&o&&e._UZ(0,"i",20)}function w(o,t){1&o&&(e.TgZ(0,"span",21),e._uU(1,"Invalid email"),e.qZA())}function C(o,t){if(1&o&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&o){const s=e.oxw();e.xp6(1),e.Oqu(s.messageError)}}function T(o,t){1&o&&e._UZ(0,"i",20)}function x(o,t){1&o&&(e.TgZ(0,"span",21),e._uU(1,"Invalid password"),e.qZA())}function A(o,t){if(1&o&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&o){const s=e.oxw();e.xp6(1),e.Oqu(s.errorPasswordMessage)}}function R(o,t){1&o&&e._UZ(0,"i",20)}function U(o,t){1&o&&(e.TgZ(0,"span",21),e._uU(1,"The passowrds are not equal"),e.qZA())}const q=[{path:"register",component:(()=>{class o{constructor(s,r,l,m){this.fb=s,this.userService=r,this.spinner=l,this.router=m,this.formCustom=new n.cw({}),this.messageError="",this.errorPasswordMessage=""}ngOnInit(){this.createForm()}createForm(){this.formCustom=this.fb.group({fullName:["",[n.kI.required]],email:["",[n.kI.required,n.kI.pattern("^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:.[a-zA-Z0-9-]+)*$")]],password:["",[n.kI.required]],repeatPassword:["",[n.kI.required]]},{validators:[this.notEqualPasswordsValidator("password","repeatPassword")]})}invalidField(s){return this.formCustom.controls[s].invalid&&this.formCustom.controls[s].touched}notEqualPasswords(){return this.formCustom.controls.password.value!==this.formCustom.controls.repeatPassword.value}onSubmit(){this.formCustom.invalid?Object.values(this.formCustom.controls).forEach(s=>{s.markAllAsTouched()}):(this.spinner.show(),this.userService.register(this.formCustom.value).subscribe(s=>{this.spinner.hide(),localStorage.setItem("access_token",s.token),localStorage.setItem("identity",JSON.stringify(s.user)),this.router.navigateByUrl("/home")},s=>{this.spinner.hide(),console.log(s);let r=s.error;r.email&&(this.messageError=r.email.msg,this.formCustom.controls.email.setErrors({hasErrors:!0})),r.password&&(this.errorPasswordMessage=r.password.msg,this.formCustom.controls.password.setErrors({hasErrors:!0})),this.formCustom.controls.password.setValue(""),this.formCustom.controls.repeatPassword.setValue("")}))}notEqualPasswordsValidator(s,r){return l=>{let u=l.controls[r];u.setErrors(l.controls[s].value==u.value?null:{notEqual:!0})}}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(n.qu),e.Y36(g.K),e.Y36(f.t2),e.Y36(a.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-register"]],decls:41,vars:20,consts:[[1,"container"],[1,"row"],[1,"col-md-12","auth"],[1,"box"],[1,"form-custom","mt-4",3,"formGroup","ngSubmit"],[1,"form-custom__group","d-flex","flex-column"],[1,"form-custom__label","mb-2"],["type","text","formControlName","fullName","minlength","10",1,"form-custom__input"],["class","fas fa-exclamation-circle form-custom__group-icon",4,"ngIf"],["class","form-custom__message-error",4,"ngIf"],[1,"form-custom__group","d-flex","flex-column","mt-3"],["type","text","formControlName","email",1,"form-custom__input"],[1,"d-flex","justify-content-between","mt-3"],[1,"form-custom__group","form-custom__group--small","d-flex","flex-column"],["type","password","formControlName","password",1,"form-custom__input"],["type","password","formControlName","repeatPassword",1,"form-custom__input"],[1,"form-custom__redirect-auth-text"],["routerLink","/auth/login"],["type","submit",1,"btn-custom","btn-custom--large","btn-custom--blue","mt-4"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#1083d5","type","line-scale-pulse-out",3,"fullScreen"],[1,"fas","fa-exclamation-circle","form-custom__group-icon"],[1,"form-custom__message-error"]],template:function(s,r){1&s&&(e._UZ(0,"app-header"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e._uU(5," Register for free "),e.TgZ(6,"form",4),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(7,"div",5),e.TgZ(8,"label",6),e._uU(9,"Your complete name"),e.qZA(),e._UZ(10,"input",7),e.YNc(11,_,1,0,"i",8),e.YNc(12,h,2,0,"span",9),e.qZA(),e.TgZ(13,"div",10),e.TgZ(14,"label",6),e._uU(15,"Email"),e.qZA(),e._UZ(16,"input",11),e.YNc(17,v,1,0,"i",8),e.YNc(18,w,2,0,"span",9),e.YNc(19,C,2,1,"span",9),e.qZA(),e.TgZ(20,"div",12),e.TgZ(21,"div",13),e.TgZ(22,"label",6),e._uU(23,"Password"),e.qZA(),e._UZ(24,"input",14),e.YNc(25,T,1,0,"i",8),e.YNc(26,x,2,0,"span",9),e.YNc(27,A,2,1,"span",9),e.qZA(),e.TgZ(28,"div",13),e.TgZ(29,"label",6),e._uU(30,"Repeat Password"),e.qZA(),e._UZ(31,"input",15),e.YNc(32,R,1,0,"i",8),e.YNc(33,U,2,0,"span",9),e.qZA(),e.qZA(),e.TgZ(34,"div",16),e.TgZ(35,"a",17),e._uU(36,"Login"),e.qZA(),e._uU(37," if you have an account. "),e.qZA(),e.TgZ(38,"button",18),e._uU(39," Register Now "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(40,"ngx-spinner",19)),2&s&&(e.xp6(6),e.Q6J("formGroup",r.formCustom),e.xp6(1),e.ekj("form-custom__group--error",r.invalidField("fullName")),e.xp6(4),e.Q6J("ngIf",r.invalidField("fullName")),e.xp6(1),e.Q6J("ngIf",r.invalidField("fullName")),e.xp6(1),e.ekj("form-custom__group--error",r.invalidField("email")),e.xp6(4),e.Q6J("ngIf",r.invalidField("email")),e.xp6(1),e.Q6J("ngIf",r.invalidField("email")&&0===r.messageError.length),e.xp6(1),e.Q6J("ngIf",0!==r.messageError.length),e.xp6(2),e.ekj("form-custom__group--error",r.invalidField("password")),e.xp6(4),e.Q6J("ngIf",r.invalidField("password")),e.xp6(1),e.Q6J("ngIf",r.invalidField("password")&&0===r.errorPasswordMessage.length),e.xp6(1),e.Q6J("ngIf",0!==r.errorPasswordMessage.length),e.xp6(1),e.ekj("form-custom__group--error",r.invalidField("repeatPassword")),e.xp6(4),e.Q6J("ngIf",r.invalidField("repeatPassword")),e.xp6(1),e.Q6J("ngIf",r.invalidField("repeatPassword")),e.xp6(7),e.Q6J("fullScreen",!0))},directives:[Z.G,n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,n.wO,d.O5,a.yS,f.Ro],styles:[""]}),o})()}];let I=(()=>{class o{}return o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[a.Bz.forChild(q)],a.Bz]}),o})();var N=i(2903);let y=(()=>{class o{}return o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.ez,I,n.UX,N.m,a.Bz,c.x]]}),o})()}}]);